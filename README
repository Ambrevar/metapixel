Metapixel 0.3
=============

Metapixel is a program for generating photomosaics. It can generate
classical photomosaics, in which the source image is viewed as a
matrix of equally sized rectangles for each of which a matching image
is substitued, as well as collage-style photomosaics, in which
rectangular parts of the source image at arbitrary positions (i.e. not
aligned to a matrix) are substituted by matching images.


Installation
------------

In order to compile Metapixel, you need libpng and libjpeg. To run the
script for preparing constituent images, you will additionally need
Perl. Most Linux distributions contain these software packages.

Edit the first line of Makefile if you want to install Metapixel
somewhere else than /usr/local. Then, type

  make

If everything compiled fine, become root and type

  make install


Preparing images
----------------

Before mosaics can be created the constituent images need to be
preprocessed. Preparing an image does two things. Firstly, it computes
various coefficients by which the image can be matched against a part
of a source image. Secondly, the image is scaled to size it will have
in the target image. Note that this size must be equal for all
constituent images and must be known in advance. The default size is
64x64 pixels.

To simplify the task of preparing images, the Perl script
'metapixel-prepare' is included in the distribution. It must be called
with two parameters: the name of directory in which the original
images are stored and the name of the directory which the scaled down
images and the table file should be stored. It also accepts parameters
specifying the size of the scaled down images. Just call it - it
prints out usage information.


Creating photomosaics
---------------------

In order to create a photomosaic for an image, it should be scaled to
an appropriate size. For classic photomosaics, the width and height of
the source image must be multiples of the widths and heights of the
small constituent images, respectively. This restriction does not
apply to collages, however.

Metapixel produces output images in the PNG format. In order to create
a classic photomosaic for the image input.jpg and write the output to
output.png with constituent images stored in the directory images, use
the following command line:

  metapixel --metapixel input.jpg output.png <images/tables

To create a collage use

  metapixel --collage --metapixel input.jpg output.png <images/tables

Using the -y, -i and -q parameters you can change the weights for each
of the color channels. For example, to match only luminance,
completely disregarding chrominance, use

  metapixel -i0 -q0 --metapixel input.jpg output.png <images/tables

The default weight for each of the channels is 1.

Note that Metapixel uses ridiculous amounts of main memory. To create
photomosaics of size 2048x2048 your machine should at least have
64MBytes RAM.


Licence and Availability
------------------------

Metapixel is distributed under the terms of the GPL.

The source of Metapixel is available at the Metapixel homepage at

  http://www.complang.tuwien.ac.at/~schani/metapixel/


---
Mark Probst
schani@complang.tuwien.ac.at
